# my-nixos-config/.sops.yaml
# Defines who can decrypt which files

keys:
  - &desktop_key age1z2a8lzz33apczwm2rpn5md8kpmcp7m2lwcjhxyvd828famguwvyq63vg7h
  - &Thinkpad_key age10n5fefpwhh3luj6vuf32rxtzcnw6slmkhl6lmtl05fmsmjyyvgksn7jsjf

creation_rules:
  # This rule applies to your main secrets file.
  # It allows decryption by your personal key AND the Age key of ANY of your servers.
  # This means any of your servers can decrypt the secrets relevant to them,
  # and you can decrypt and edit the file from your admin machine

  - path_regex: secrets/secrets.yaml$
    key_groups:
      - age:
        - *desktop_key
        - *Thinkpad_key

  - path_regex: secrets/nginx/nginx-selfsigned.key$
    key_groups:
      - age:
        - *desktop_key
        - *Thinkpad_key

